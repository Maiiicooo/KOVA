<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kova — contribute</title>

    <style>
        :root {
            --bg: #161515;
            --fg: #fff;
            --muted: rgba(255, 255, 255, 0.6);
            --line: rgba(255, 255, 255, 0.12);
        }

        /* BODY – 100% scherm, nooit scrollen */
        body {
            margin: 0;
            background: var(--bg);
            color: var(--fg);
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-sizing: border-box;
        }

        /* NAVBAR ------------------------------------------------------ */
        nav {
            width: 100%;
            padding: 22px 34px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--line);
            box-sizing: border-box;
            flex-shrink: 0;
            /* navbar blijft altijd zichtbaar */
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-left img {
            height: 50px;
            width: auto;
        }

        .beta {
            padding: 2px;
            font-size: 0.85rem;
            background-color: #8b7108;
            color: white;
            letter-spacing: 0.5px;
        }

        .nav-right a {
            margin-left: 32px;
            text-decoration: none;
            color: var(--fg);
            font-size: 0.95rem;
            opacity: 0.8;
            transition: opacity 0.25s;
        }

        .navbar-seperator {
            margin-left: 20px;
        }

        .nav-right a:hover {
            opacity: 1;
            color: #8b7108;
        }

        /* CONTENT */

        .contribute {
            max-width: 700px;
            width: 100%;
        }

               /* NEW — Page wrapper like Doko */
        .page-container {
            flex: 1;
            overflow-y: auto;
            display: flex;
            justify-content: center;
            padding: 40px 20px;
            box-sizing: border-box;
        }



        @media (max-width: 600px) {

                .page-container div[style*="display:flex"][style*="gap:12px"] {
        flex-direction: column !important;
    }

            nav {
                padding: 16px 18px;
            }

            .nav-left img {
                height: 40px;
            }

            .nav-left .beta {
                font-size: 0.7rem;
                padding: 2px 5px;
            }

            .nav-right {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .nav-right a {
                margin-left: 0;
                font-size: 0.85rem;
            }

            .navbar-seperator {
                margin-left: 0;
                opacity: 0.5;
            }

            nav {
                gap: 12px;
            }

            .main-logo {
                width: 250px;
            }

        }
    </style>

</head>

   <body>

    <!-- NAV -->
    <nav>
        <div class="nav-left">
            <a href="index.html">
                 <img src="images/kogaskeer.png" alt="Kova logo small">
            </a>
           
            <div class="beta">now in alpha!</div>
        </div>

        <div class="nav-right">
            <a href="about.html" target="_blank">about</a>
            <span class="navbar-seperator">//</span>
            <a href="https://www.maicominne.com/blog/kova.html" target="_blank">blog</a>
            <span class="navbar-seperator">//</span>
            <a href="premium.html">premium</a>
        </div>
    </nav>

    <!-- CONTENT -->
<div class="page-container">
    <section class="contribute">
    <h1 style="font-size:32px; margin-bottom:25px; opacity:0.9;">
        <img src="images/peu.gif" style="max-height: 30px; width: auto;">
        Contribute a spot
    </h1>

    <p style="color:var(--muted); margin-bottom:30px; line-height:1.6;">
        Know a hidden gem worth sharing? Submit it here.
        Once validated it will appear on the map. 
    </p>

    <form id="spotForm" style="display:flex; flex-direction:column; gap:22px;">

        <input 
            type="text" 
            id="spotName" 
            placeholder="Spot name"
            required
            style="padding:14px; background:#222; border:none; color:#fff; font-size:16px;"
        />

        <textarea
            id="spotDesc"
            placeholder="Description"
            rows="4"
            style="padding:14px; background:#222; border:none; color:#fff; font-size:16px; resize:none;"
        ></textarea>

        <!-- Hint voor mobiel -->
<p style="color:var(--muted); font-size:14px; margin-bottom:1px;">
    <strong style="color: #8b7108;">On mobile:</strong> open Google Maps, tap & hold the spot → "Dropped pin" → copy the coordinates.
</p>
<p style="color:var(--muted); font-size:14px; margin-bottom:1px;">
    <strong style="color: #8b7108;">On web:</strong> right-click the spot in Google Maps → "What's here?" → copy the coordinates.
</p>

        <div style="display:flex; gap:12px;">
            <input 
                type="number" 
                id="lat" 
                step="any"
                placeholder="Latitude"
                required
                style="flex:1; padding:14px; background:#222; border:none; color:#fff; font-size:16px;"
            />

            <input 
                type="number" 
                id="lng" 
                step="any"
                placeholder="Longitude"
                required
                style="flex:1; padding:14px; background:#222; border:none; color:#fff; font-size:16px;"
            />
        </div>

        <label style="font-size:15px; color:var(--muted);">
            Spot photo  <strong style="color: #8b7108;">(optional)</strong>
        </label>
        <input 
            type="file" 
            id="spotPhoto"
            accept="image/*"
            style="padding:10px 0; color:var(--muted);"
        />

        <button 
            type="submit"
            style="
                padding:14px;
                background:white;
                color:black;
                border:none;
                font-size:16px;
                font-weight:600;
                cursor:pointer;
                transition:0.25s;
            "
        >
            Submit spot
        </button>

    </form>

    <p id="statusMsg" style="margin-top:20px; color:var(--muted);"></p>

</section>

</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } 
        from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL }
        from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";

    const firebaseConfig = {
        apiKey: "AIzaSyARxFI9HyJxrINfzDazhxFHKSrGLX8KoBk",
        authDomain: "kova-6052a.firebaseapp.com",
        projectId: "kova-6052a",
        storageBucket: "kova-6052a.firebasestorage.app",
        messagingSenderId: "873689812978",
        appId: "1:873689812978:web:e0581f3df823e51239656b",
        measurementId: "G-VM5224Z3K6"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const storage = getStorage(app);

    const form = document.getElementById("spotForm");
    const statusMsg = document.getElementById("statusMsg");

    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        statusMsg.textContent = "Uploading…";

        const name = spotName.value.trim();
        const desc = spotDesc.value.trim();
        const lat = parseFloat(document.getElementById("lat").value);
        const lng = parseFloat(document.getElementById("lng").value);
        const file = document.getElementById("spotPhoto").files[0];

        let photoURL = null;

        try {
            if (file) {
                const fileRef = ref(storage, `spots/${Date.now()}_${file.name}`);
                await uploadBytes(fileRef, file);
                photoURL = await getDownloadURL(fileRef);
            }

            await addDoc(collection(db, "spots"), {
                name,
                description: desc,
                lat,
                lng,
                photoURL,
                status: "pending",
                timestamp: serverTimestamp()
            });

            statusMsg.textContent = "Spot submitted! Thanks!";
            form.reset();
        } 
        catch (err) {
            console.error(err);
            statusMsg.textContent = "Something went wrong.";
        }
    });
</script>

</body>


</body>

</html>
